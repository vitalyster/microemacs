; -!- emf -!-
; This is part of the JASSPA MicroEmacs macro files
; Copyright (C) 1999-2009 JASSPA (www.jasspa.com)
; See the file me.emf for copying and conditions.
;
; Created:     Tue Feb 16 1999
; Synopsis:    Set up the chatacter translations for the different char sets.
; Authors:     Steven Phillips
;
; Notes:       The internal default is ISO-8859 (1-...).
;               All spelling dictionaries (to date anyway) are encoded 
;               with this character format and rules are required to 
;               translate characters into and out of this set.
;
!if &les @# 1
    ; if executed with an argument of 0 or less, return the list
    set-variable %charset-names  "|ISO-8859|ISO-8859 with box chars|Windows ANSI|Windows OEM|Windows Greek|Windows Turkish|Windows Central Europe|Windows Cyrillic|DOS LatinUS CP437|DOS Latin1 CP850|DOS Cyrillic CP866|Cyrillic koi8-r|Plain Text|"
    set-variable %charset-value  "||ISO-box|Win-ANSI|Win-OEM|Win-GREEK|Win-TURK|Win-CENTEUR|Win-CYR|PC-437|PC-850|PC-866|koi8-r|plain-text|"
    ; the windows font type
    set-variable %charset-types  "|||0|255|161|162|238|204|||||"
    !return
!endif
; get the users display char set
set-variable #l0 &reg &spr "/history/%s/char-set" %platform ""
set-variable #l1 1
set-variable .change-font.type 0
!if &seq #l0 ""
    set-char-mask "M" ""
!elif &seq #l0 "ISO-box"
    set-char-mask "M" ""
    set-char-mask "dp" "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR\CP\CQ\C^\C_"
    set-char-mask "p"  "\CI\CJ"
    set-variable $box-chars "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR"
    set-variable $window-chars "=-#*%=^   v*==^^      vv**|<   >*||<<      >>** x* > <>\\.$$\\"
    set-variable $system &band $system &bnot 0x10000
    set-variable #l1 0
!elif &seq #l0 "Win-ANSI"
    set-char-mask "M" ""
!elif &seq #l0 "Win-OEM"
    set-char-mask "M" "£œª¦«®¬ª®©°§±ñ²ı³ü´îµæ¶õ·ú¸ı¹û»¯¼¬½«¾ó¿¨À·ÁÂŠÃ²ÄÆ’Ç€ÈÔÉÊÒËÑÌŞÍÖÎ×ÏØĞÑÑ¥ÒãÓàÔâÕåÖ™×ØÙëÚéÛêÜšİìŞçßÿà…á âƒä„å†æ‘ç‡èŠé‚êˆë‰ìí¡îŒï‹ñ¤ò•ó¢ô“õäö”÷öø›ù—ú£û–üıìşèÿ˜"
    set-variable $box-chars "³Ú¿ÀÙÂÃÅ´ÁÄ"
    set-variable $window-chars "=-#*%=\C^± ±\C_\CD==\C^\C^±±  ±±\C_\C_\C[\CZ|\CQ± ±\CP\CD||\CQ\CQ±±  ±±\CP\CP\C[\CZ x* \CP \CQ\xaf\xfb\xfa$$\\"
    set-variable $system &band $system &bnot 0x10000
    set-variable .change-font.type 255
    set-variable #l1 0
!elif &seq #l0 "Win-GREEK" ; ISO-7
    set-char-mask "M" ""
    set-variable .change-font.type 161
!elif &seq #l0 "Win-TURK" ; ISO-3
    set-char-mask "M" ""
    set-variable .change-font.type 162
!elif &seq #l0 "Win-CENTEUR"
    ; map iso8859-2 -> win32 cp1250
    set-char-mask "M" "\xA1\xA5\xA5\xBC\xA6\x8C\xA9\x8A\xAB\x8D\xAC\x8F\xAE\x8E\xB1\xB9\xB5\xBE\xB6\x9C\xB7\xA1\xB9\x9A\xBB\x9D\xBC\x9F\xBE\x9E"
    set-variable .change-font.type 238
!elif &seq #l0 "Win-CYR"
    ; map ISO8859-5 -> win32 cp1251
    set-char-mask "M" "°À±Á²Â³Ã´ÄµÅ¶Æ·Ç¸È¹ÉºÊ»Ë¼Ì½Í¾Î¿ÏÀĞÁÑÂÒÃÓÄÔÅÕÆÖÇ×ÈØÉÙÊÚËÛÌÜÍİÎŞÏß¡¨ĞàÑáÒâÓãÔäÕåÖæ×çØèÙéÚêÛëÜìİíŞîßïàğáñâòãóäôåõæöç÷èøéùêúëûìüíıîşïÿñ¸"
    set-variable .change-font.type 204
!elif &seq #l0 "PC-437"
    set-char-mask "M" "£œª¦«®¬ª°ø±ñ²ıµæ·ú»¯¼¬½«¿¨ÀAÁAÂAÃAÄÅÆ’AAÇ€ÈEÉÊEËEEEÌIÍIÎIÏIIIÑ¥ÒOÓOÔOÕOÖ™OOÙUÚUÛUÜšUUİYßáà…á âƒãaä„åaæ‘aaç‡èŠé‚êˆë‰ìí¡îŒï‹ñ¤ò•ó¢ô“õoö”÷öøoooù—ú£û–üuuıyÿ˜yy"
    set-variable $box-chars "³Ú¿ÀÙÂÃÅ´ÁÄ"
    set-variable $window-chars "=-#*%=\C^± ±\C_\CD==\C^\C^±±  ±±\C_\C_\C[\CZ|\CQ± ±\CP\CD||\CQ\CQ±±  ±±\CP\CP\C[\CZ x* \CP \CQ>\\.$$\\"
    set-variable $system &band $system &bnot 0x10000
    set-variable #l1 0
!elif &seq #l0 "PC-850"
    set-char-mask "M" "£œª¦«®¬ª®©°§±ñ²ı³ü´îµæ¶õ·ú¸ı¹û»¯¼¬½«¾ó¿¨À·ÁÂŠÃ²ÄÆ’Ç€ÈÔÉÊÒËÑÌŞÍÖÎ×ÏØĞÑÑ¥ÒãÓàÔâÕåÖ™×ØÙëÚéÛêÜšİìŞçßÿà…á âƒä„å†æ‘ç‡èŠé‚êˆë‰ìí¡îŒï‹ñ¤ò•ó¢ô“õäö”÷öø›ù—ú£û–üıìşèÿ˜"
    set-variable $box-chars "³Ú¿ÀÙÂÃÅ´ÁÄ"
    set-variable $window-chars "=-#*%=\C^± ±\C_\CD==\C^\C^±±  ±±\C_\C_\C[\CZ|\CQ± ±\CP\CD||\CQ\CQ±±  ±±\CP\CP\C[\CZ x* \CP \CQ>\\.$$\\"
    set-variable $system &band $system &bnot 0x10000
    set-variable #l1 0
!elif &seq #l0 "PC-866"
    set-char-mask "M" "°\x80±\x81²\x82³\x83´\x84µ\x85¶\x86·\x87¸\x88¹\x89º\x8A»\x8B¼\x8C½\x8D¾\x8E¿\x8FÀ\x90Á\x91Â\x92Ã\x93Ä\x94Å\x95Æ\x96Ç\x97È\x98É\x99Ê\x9AË\x9BÌ\x9CÍ\x9DÎ\x9EÏ\x9F¡\xF0Ğ\xA0Ñ\xA1Ò\xA2Ó\xA3Ô\xA4Õ\xA5Ö\xA6×\xA7Ø\xA8Ù\xA9Ú\xAAÛ\xABÜ\xACİ\xADŞ\xAEß\xAFà\xE0á\xE1â\xE2ã\xE3ä\xE4å\xE5æ\xE6ç\xE7è\xE8é\xE9ê\xEAë\xEBì\xECí\xEDî\xEEï\xEFğ\xFCñ\xF1"
    set-variable .change-font.type 204
!elif &seq #l0 "koi8-r"
    set-char-mask "M" "°á±â²÷³ç´äµå¶ö·ú¸é¹êºë»ì¼í½î¾ï¿ğÀòÁóÂôÃõÄæÅèÆãÇşÈûÉıÊÿËùÌøÍüÎàÏñ¡³ĞÁÑÂÒ×ÓÇÔÄÕÅÖÖ×ÚØÉÙÊÚËÛÌÜÍİÎŞÏßĞàÒáÓâÔãÕäÆåÈæÃçŞèÛéİêßëÙìØíÜîÀïÑñ£"
    set-variable .change-font.type 204
!elif &seq #l0 "plain-text"
    set-char-mask "M" "ÀAÁAÂAÃAÄAÇCÈEÉEÊEËEÌIÍIÎIÏIÑNÒOÓOÔOÕOÖO×xØOÙUÚUÛUÜUİYßBàaáaâaäaåaçcèeéeêeëeìiíiîiïiñnòoóoôoõoöoøoùuúuûuüuıyşbÿy"
!endif

!if &reg &spr "/history/%s/ext-char-set" %platform "0"
    set-char-mask "dp" "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR\CP\CQ\C^\C_\CG\C[\C]"
    set-char-mask "p"  "\CA\CB\CC\CD\CH\CI\CJ\CS\CT\CZ"
    set-variable .osd.checkbox-chars "^\CA\CB\CC\CD^"
    set-variable $box-chars "\CY\CM\CL\CN\CK\CX\CU\CO\CV\CW\CR"
    set-variable $window-chars "=-#*%=\C^\C[ \C[\C_*==\C^\C^\C[\C[  \C[\C[\C_\C_**|\CQ\C] \C]\CP*||\CQ\CQ\C]\C]  \C]\C]\CP\CP** \CT\CZ \CP \CQ\t\n\CG\CH\CI\\"
    set-variable $system &bor $system 0x10000
!else
    set-variable .osd.checkbox-chars "^[ X]^"
    !if #l1
        set-variable $box-chars "|+++++++++-"
        set-variable $window-chars "=-#*%=^   v*==^^      vv**|<   >*||<<      >>** x* > <>\\.$$\\"
        set-variable $system &band $system &bnot 0x10000
    !endif
!endif
